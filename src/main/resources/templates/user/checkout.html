<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head}">
    <title>Thanh toán</title>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>
<div class="container mt-4">
    <h1>Thanh toán (COD)</h1>
    <div th:if="${#lists.isEmpty(items)}" class="alert alert-info">Giỏ hàng trống</div>

    <div class="row" th:if="${!#lists.isEmpty(items)}">
        <div class="col-md-7">
            <h4>Thông tin nhận hàng</h4>
            <form th:action="@{/checkout}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <div class="mb-3">
                    <label class="form-label">Địa chỉ</label>
                    <input type="text" class="form-control" name="address" th:value="${address}">
                </div>
                <div class="mb-3">
                    <label class="form-label">Số điện thoại</label>
                    <input type="text" class="form-control" name="phone">
                </div>
                <button type="submit" class="btn btn-success">Đặt hàng</button>
            </form>
        </div>
        <div class="col-md-5">
            <h4>Đơn hàng</h4>
            <ul class="list-group mb-3">
                <li class="list-group-item d-flex justify-content-between align-items-center" th:each="it : ${items}">
                    <span>
                        <span th:text="${it.product.name}"></span>
                        <small class="text-muted">x<span th:text="${it.quantity}"></span></small>
                    </span>
                    <span th:text="${#numbers.formatCurrency(it.price.multiply(T(java.math.BigDecimal).valueOf(it.quantity)))}"></span>
                </li>
            </ul>
        </div>
    </div>
</div>
<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
